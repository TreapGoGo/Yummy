/*
  Yummy! æ ·å¼è¡¨ (v0.4.4)

  æœ¬æ ·å¼è¡¨å®šä¹‰äº† Yummy! æ‰©å±•æ³¨å…¥åˆ° ChatGPT é¡µé¢çš„æ‰€æœ‰UIå…ƒç´ çš„è§†è§‰è¡¨ç°ã€‚
  å…¶æ ¸å¿ƒè®¾è®¡å“²å­¦æ˜¯ï¼š
  1.  **æœ€å°ä¾µå…¥**ï¼šå°½å¯èƒ½ä¸ç ´å ChatGPT çš„åŸå§‹å¸ƒå±€å’Œæ ·å¼ã€‚
  2.  **è§†è§‰åé¦ˆ**ï¼šé€šè¿‡é¢œè‰²ã€è¿‡æ¸¡åŠ¨ç”»å’Œæ‚¬åœæ•ˆæœï¼Œä¸ºç”¨æˆ·çš„æ¯ä¸€ä¸ªæ“ä½œæä¾›æ¸…æ™°ã€å³æ—¶çš„åé¦ˆã€‚
  3.  **å“åº”å¼äº¤äº’**ï¼šUI å…ƒç´ ï¼ˆå¦‚è¯„ä»·æ ï¼‰åº”åœ¨éœ€è¦æ—¶å‡ºç°ï¼Œåœ¨ä¸éœ€è¦æ—¶éšè—ï¼Œä¿æŒç•Œé¢æ•´æ´ã€‚
*/

/* 
  æ®µè½å®¹å™¨ (.yummy-paragraph-container)
  è¿™æ˜¯ç”± content.js åŠ¨æ€åˆ›å»ºçš„ã€ç”¨äºåŒ…è£¹æ¯ä¸€ä¸ªå¯è¯„ä»·å†…å®¹å—ï¼ˆå¦‚ <p>, <h1>, <li> ç­‰ï¼‰çš„ <div> å®¹å™¨ã€‚
  å®ƒçš„ä¸»è¦ä½œç”¨æœ‰ä¸¤ä¸ªï¼š
  1.  **æä¾›æ‚¬åœç›®æ ‡**ï¼šä¸‹é¢çš„ `:hover` è§„åˆ™åˆ©ç”¨è¿™ä¸ªå®¹å™¨æ¥è§¦å‘å…¶å†…éƒ¨è¯„ä»·æ çš„æ˜¾ç¤ºã€‚
  2.  **æä¾›å®šä½ä¸Šä¸‹æ–‡**ï¼šè™½ç„¶åœ¨ v0.4.4 ç‰ˆæœ¬ä¸­å…¶ position æ˜¯ staticï¼Œå¯¼è‡´è¯„ä»·æ å®é™…ä¸Šæ˜¯ç›¸å¯¹äºæ›´å¤§çš„çˆ¶å®¹å™¨å®šä½ï¼Œ
      ä½†åœ¨é€»è¾‘ä¸Šï¼Œå®ƒæœ¬åº”æ˜¯è¯„ä»·æ çš„ç›´æ¥å®šä½é”šç‚¹ã€‚è¿™æ˜¯åç»­ç‰ˆæœ¬å¯èƒ½éœ€è¦ä¼˜åŒ–çš„ç‚¹ã€‚
*/
.yummy-paragraph-container {
    /* 
      **æ ¸å¿ƒå˜æ›´ï¼šåˆ›å»ºå®šä½ä¸Šä¸‹æ–‡**
      é€šè¿‡å°† position è®¾ç½®ä¸º relativeï¼Œè¿™ä¸ªå®¹å™¨ç°åœ¨æˆä¸ºäº†å…¶å†…éƒ¨
      æ‰€æœ‰ `position: absolute` å­å…ƒç´ çš„å®šä½é”šç‚¹ã€‚
      è¿™æ˜¯è§£å†³è¯„ä»·æ ä½ç½®ä¸ç¨³å®šé—®é¢˜çš„å…³é”®ã€‚
    */
    position: relative;
    /*
      **æ ¸å¿ƒäº¤äº’å¢å¼ºï¼šæ‰©å¤§æ‚¬åœåŒºåŸŸ**
      é€šè¿‡å¢åŠ å·¦å†…è¾¹è·ï¼ˆpadding-leftï¼‰ï¼Œæˆ‘ä»¬è®©è¿™ä¸ªå®¹å™¨å‘å·¦ä¾§ç©ºç™½åŒºåŸŸå»¶ä¼¸ï¼Œ
      ä»è€Œåˆ›é€ äº†ä¸€ä¸ªæ›´å¤§çš„ã€ä¸å¯è§çš„é¼ æ ‡æ‚¬åœç›®æ ‡åŒºåŸŸã€‚
      åŒæ—¶ï¼Œé€šè¿‡ä¸€ä¸ªç­‰å€¼çš„è´Ÿå¤–è¾¹è·ï¼ˆmargin-leftï¼‰ï¼Œæˆ‘ä»¬å°†å®¹å™¨åœ¨è§†è§‰ä¸Šæ‹‰å›åˆ°
      åŸå§‹ä½ç½®ï¼Œç¡®ä¿å…¶å†…éƒ¨çš„æ–‡æœ¬å†…å®¹ï¼ˆ<p>, <h1> ç­‰ï¼‰ä¸ä¼šå‘ç”Ÿæ°´å¹³ä½ç§»ã€‚
      è¿™æ ·åšçš„ç»“æœæ˜¯ï¼Œç”¨æˆ·çš„é¼ æ ‡ç°åœ¨å¯ä»¥æ‚¬åœåœ¨æ®µè½å·¦ä¾§çš„ä»»ä½•ç©ºç™½å¤„æ¥å”¤å‡ºè¯„ä»·æ ï¼Œ
      æå¤§åœ°æ”¹å–„äº†å¯ç”¨æ€§ã€‚
      85px è¿™ä¸ªå€¼æ˜¯ä¸è¯„ä»·æ çš„ left: -85px ç›¸äº’å‘¼åº”çš„ã€‚
    */
    padding-left: 85px;
    margin-left: -85px;
}

/*
  è¯„ä»·æ  (.yummy-rating-bar)
  è¿™æ˜¯åŒ…å«"å–œæ¬¢"å’Œ"ä¸å–œæ¬¢"æŒ‰é’®çš„æ ¸å¿ƒUIã€‚
*/
.yummy-rating-bar {
    /* 
      å…³é”®å®šä½ï¼šé€šè¿‡ç»å¯¹å®šä½ï¼Œå°†è¯„ä»·æ ä»æ­£å¸¸çš„æ–‡æ¡£æµä¸­è„±ç¦»ï¼Œä½¿å…¶å¯ä»¥"æ‚¬æµ®"åœ¨é¡µé¢ä¸Šã€‚
      å®ƒä¼šç›¸å¯¹äºæœ€è¿‘çš„ã€é static å®šä½çš„ç¥–å…ˆå…ƒç´ è¿›è¡Œå®šä½ã€‚
      åœ¨æœ¬æ¬¡ä¿®æ”¹åï¼Œè¿™ä¸ªç¥–å…ˆå…ƒç´ å°±æ˜¯ .yummy-paragraph-containerã€‚
    */
    position: absolute;
    /*
      **æ–°å¢ï¼šå‚ç›´å®šä½**
      å°†å…¶å›ºå®šåœ¨ç›¸å¯¹çˆ¶å®¹å™¨é¡¶éƒ¨ 2px çš„ä½ç½®ã€‚ç”±äºçˆ¶å®¹å™¨ä½ç½®æ˜¯ç¨³å®šçš„ï¼Œ
      å› æ­¤è¯„ä»·æ çš„å‚ç›´ä½ç½®ä¹Ÿéšä¹‹ç¨³å®šã€‚
    */
    top: 2px;
    /* 
      æ°´å¹³å®šä½ï¼š-85px æ˜¯ä¸€ä¸ªç²¾å¿ƒé€‰æ‹©çš„"é­”æœ¯æ•°å­—"ï¼Œç›®çš„æ˜¯è®©è¯„ä»·æ æ­£å¥½å‡ºç°åœ¨
      ChatGPT å¯¹è¯æ°”æ³¡å·¦ä¾§çš„ç©ºç™½åŒºåŸŸï¼Œæ—¢ä¸é®æŒ¡æ–‡æœ¬ï¼Œåˆæ–¹ä¾¿é¼ æ ‡è§¦åŠã€‚
    */
    left: -85px;
    width: 80px;

    /* ä½¿ç”¨ Flexbox å¸ƒå±€ï¼Œç¡®ä¿å†…éƒ¨çš„ä¸¤ä¸ªæŒ‰é’®èƒ½æ°´å¹³ã€å±…ä¸­æ’åˆ— */
    display: flex;
    flex-direction: row;
    justify-content: center;
    align-items: center;
    gap: 4px;

    /* 
      é»˜è®¤éšè—ä¸å¹³æ»‘è¿‡æ¸¡ï¼š
      é»˜è®¤çŠ¶æ€ä¸‹è¯„ä»·æ å®Œå…¨é€æ˜ï¼ˆä¸å¯è§ï¼‰ã€‚å½“å…¶é€æ˜åº¦å˜åŒ–æ—¶ï¼ˆè§ä¸‹é¢çš„:hoverè§„åˆ™ï¼‰ï¼Œ
      è¿™ä¸ªè¿‡ç¨‹ä¼šåœ¨ 0.2 ç§’å†…å¹³æ»‘å®Œæˆï¼Œè€Œä¸æ˜¯ç”Ÿç¡¬åœ°é—ªç°/æ¶ˆå¤±ã€‚
    */
    opacity: 0;
    transition: opacity 0.2s ease-in-out;
    padding: 2px 0;
}

/*
  æ ¸å¿ƒäº¤äº’é€»è¾‘ï¼šå½“é¼ æ ‡æ‚¬åœåœ¨æ®µè½å®¹å™¨ä¸Šæ—¶ï¼Œå…¶å†…éƒ¨çš„è¯„ä»·æ å˜ä¸ºä¸é€æ˜ï¼ˆå¯è§ï¼‰ã€‚
*/
.yummy-paragraph-container:hover .yummy-rating-bar {
    opacity: 1;
}

/*
  è¯„ä»·æŒ‰é’® (.yummy-rating-button)
  å®šä¹‰äº† ğŸ˜‹ å’Œ ğŸ¤® è¿™ä¸¤ä¸ªæŒ‰é’®çš„é€šç”¨æ ·å¼ã€‚
*/
.yummy-rating-button {
    cursor: pointer;
    font-size: 16px;
    padding: 2px;
    border-radius: 4px;
    /* è½»å¾®çš„æ”¾å¤§åŠ¨ç”»ï¼Œæä¾›åŠ¨æ€åé¦ˆ */
    transition: transform 0.1s ease-in-out;
    line-height: 1;
    /* 
      ç¦æ­¢é€‰ä¸­æ–‡æœ¬ï¼šé˜²æ­¢ç”¨æˆ·åœ¨ç‚¹å‡»æ—¶æ„å¤–é€‰ä¸­ Emoji å­—ç¬¦ï¼Œ
      ç¡®ä¿å…¶äº¤äº’è¡Œä¸ºæ›´åƒä¸€ä¸ªçœŸæ­£çš„"æŒ‰é’®"ã€‚
    */
    -webkit-user-select: none;
    /* Safari */
    -ms-user-select: none;
    /* IE 10+ and Edge */
    user-select: none;
    /* Standard syntax */
}

.yummy-rating-button:hover {
    transform: scale(1.2);
}

/*
  é—ªçƒåŠ¨ç”» (@keyframes yummy-flash-background)
  è¿™æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„åŠ¨ç”»æ•ˆæœï¼Œç”¨äºåœ¨éœ€è¦æ—¶ï¼ˆå¦‚å¯¹æ ‡é¢˜è¿›è¡Œåˆæ¬¡è¯„çº§ï¼‰ç»™äºˆç”¨æˆ·éä¾µå…¥å¼çš„è§†è§‰æç¤ºã€‚
  åŠ¨ç”»è¿‡ç¨‹ä¸ºï¼šèƒŒæ™¯ä»é€æ˜ -> åŠé€æ˜ç°è‰² -> é€æ˜ã€‚
*/
@keyframes yummy-flash-background {
    0%,
    100% {
        background-color: transparent;
    }

    50% {
        background-color: rgba(229, 231, 235, 0.7);
        /* A light gray, semi-transparent */
    }
}

/*
  é—ªçƒæ•ˆæœåº”ç”¨ç±» (.yummy-flash)
  ä»»ä½•è¢« JS åŠ¨æ€æ·»åŠ äº†è¿™ä¸ªç±»çš„å…ƒç´ ï¼Œéƒ½ä¼šæ’­æ”¾ä¸Šé¢çš„é—ªçƒåŠ¨ç”»ã€‚
*/
.yummy-flash {
    animation: yummy-flash-background 0.5s ease-in-out;
}

/*
  è¯„ä»·çŠ¶æ€é«˜äº® (.yummy-liked, .yummy-disliked)
  è¿™æ˜¯ç”¨æˆ·è¯„ä»·åæœ€ä¸»è¦çš„è§†è§‰åé¦ˆã€‚
  ä¸ºäº†å®ç°"ä¸å½±å“æ’ç‰ˆ"çš„å¸¦å†…è¾¹è·åœ†è§’é«˜äº®ï¼Œæˆ‘ä»¬é‡‡ç”¨äº†ä¼ªå…ƒç´ æ–¹æ¡ˆã€‚
*/
.yummy-liked,
.yummy-disliked {
    /* 
      1. ç§»é™¤ç›´æ¥çš„èƒŒæ™¯è‰²ï¼Œå› ä¸ºå®ƒæ— æ³•å®ç°å¸¦ padding çš„åœ†è§’è€Œä¸å½±å“å¸ƒå±€ã€‚
    */
    background-color: transparent !important;
    /* 
      2. åˆ›å»ºæ–°çš„å †å ä¸Šä¸‹æ–‡ (stacking context)ã€‚
      è¿™æ˜¯è®© z-index: -1 åœ¨ ::before ä¼ªå…ƒç´ ä¸ŠæŒ‰é¢„æœŸå·¥ä½œçš„å…³é”®ã€‚
      ä»»ä½•é `static` çš„ `position` å€¼éƒ½ä¼šåˆ›å»ºå †å ä¸Šä¸‹æ–‡ã€‚
    */
    position: relative;
    /*
      3. ç¡®ä¿å…ƒç´ è‡ªèº«åœ¨å †å ä¸Šä¸‹æ–‡ä¸­ä½äº z=0 çš„å±‚çº§ã€‚
    */
    z-index: 0;
}

/*
  é«˜äº®ä¼ªå…ƒç´  ("è¡¬åº•")
  è¿™æ‰æ˜¯çœŸæ­£çš„é«˜äº®è‰²å—ã€‚å®ƒä½œä¸ºå…ƒç´ çš„ ::before ä¼ªå…ƒç´ å­˜åœ¨ã€‚
*/
.yummy-liked::before,
.yummy-disliked::before {
    /* å¿…é¡»é¡¹ï¼šä¼ªå…ƒç´ éœ€è¦ content å±æ€§æ‰èƒ½è¢«æ¸²æŸ“ */
    content: '';
    /* 
      å…³é”®å®šä½ï¼šå°†å…¶ç»å¯¹å®šä½äºçˆ¶å…ƒç´ ï¼ˆå³ .yummy-liked/.yummy-disliked æœ¬èº«ï¼‰
    */
    position: absolute;
    /*
      å…³é”®çš„ z-indexï¼šå€¼ä¸º -1 ä¼šå°†è¿™ä¸ªä¼ªå…ƒç´ ç½®äºå…¶çˆ¶å…ƒç´ å †å ä¸Šä¸‹æ–‡çš„æœ€åº•å±‚ï¼Œ
      ä¹Ÿå°±æ˜¯åœ¨çˆ¶å…ƒç´ çš„æ–‡æœ¬å†…å®¹çš„"ä¸‹æ–¹"ã€‚è¿™å°±æ˜¯"è¡¬åº•"æ•ˆæœçš„æ¥æºã€‚
    */
    z-index: -1;
    
    /* 
      åˆ›å»º"å†…è¾¹è·"æ•ˆæœï¼šé€šè¿‡ä½¿ç”¨è´Ÿå€¼ï¼Œæˆ‘ä»¬å°†ä¼ªå…ƒç´ çš„è¾¹ç•Œæ‰©å±•åˆ°å…¶çˆ¶å…ƒç´ çš„è¾¹ç•Œä¹‹å¤–ã€‚
      ä¾‹å¦‚ top: -4px; æ„å‘³ç€ä¼ªå…ƒç´ çš„ä¸Šè¾¹ç•Œæ¯”å…¶çˆ¶å…ƒç´ çš„ä¸Šè¾¹ç•Œè¿˜è¦é«˜ 4pxã€‚
      è¿™å°±åœ¨ä¸ä½¿ç”¨ `padding` å±æ€§ã€ä¸æŒ¤å‹å†…éƒ¨æ–‡æœ¬ç©ºé—´çš„æƒ…å†µä¸‹ï¼Œåˆ›é€ äº†è§†è§‰ä¸Šçš„å†…è¾¹è·ã€‚
    */
    top: -2px;
    bottom: -2px;
    left: -6px;
    right: -6px;

    /*
      åœ†è§’æ•ˆæœï¼šç›´æ¥åœ¨ä½œä¸ºè‰²å—çš„ä¼ªå…ƒç´ ä¸Šåº”ç”¨ã€‚
    */
    border-radius: 6px;
}

/*
  ä¸ºä¸¤ç§çŠ¶æ€åˆ†åˆ«è®¾ç½®"è¡¬åº•"çš„é¢œè‰²ã€‚
*/
.yummy-liked::before {
    background-color: rgba(221, 247, 221, 0.8);
}

.yummy-disliked::before {
    background-color: rgba(255, 221, 221, 0.8);
}

/*
  åµŒå¥—åˆ—è¡¨å¤„ç†ï¼šè¿™æ˜¯ä¸€ä¸ªé’ˆå¯¹ç‰¹æ®Šåœºæ™¯çš„é˜²å¾¡æ€§è§„åˆ™ã€‚
  å½“ä¸€ä¸ªå·²ç»è¢«é«˜äº®çš„å…ƒç´ ï¼ˆå¦‚ <li>ï¼‰å†…éƒ¨åˆåŒ…å«ä¸€ä¸ªåˆ—è¡¨ï¼ˆ<ul> æˆ– <ol>ï¼‰æ—¶ï¼Œ
  ä¸ºäº†é¿å…é«˜äº®èƒŒæ™¯è‰²åœ¨å­åˆ—è¡¨ä¸Šé‡å¤å åŠ å¯¼è‡´é¢œè‰²è¿‡æ·±ï¼Œ
  è¿™æ¡è§„åˆ™ä¼šå¼ºåˆ¶å°†å­åˆ—è¡¨çš„èƒŒæ™¯è®¾å›ç™½è‰²ï¼Œä¿è¯å¯è¯»æ€§ã€‚
*/
.yummy-liked>ul,
.yummy-liked>ol,
.yummy-disliked>ul,
.yummy-disliked>ol {
    background-color: #FFFFFF !important;
}

/* --- Control Panel --- */
/* 
  å³ä¾§æ§åˆ¶é¢æ¿ (.yummy-control-panel)
  è¿™æ˜¯ä¸€ä¸ªå›ºå®šåœ¨å±å¹•å³ä¾§çš„æ‚¬æµ®é¢æ¿ï¼Œä½œä¸ºæ‰€æœ‰å…¨å±€æ“ä½œæŒ‰é’®çš„å®¹å™¨ã€‚
  å®ƒçš„æ˜¾éšå’ŒæŠ˜å éƒ½ä¾èµ–äº class çš„åˆ‡æ¢å’Œ CSS transition åŠ¨ç”»ã€‚
*/
.yummy-control-panel {
    position: fixed;
    top: 50%;
    right: 20px;
    transform: translateY(-50%);
    padding: 0;
    z-index: 9998;
    display: flex;
    flex-direction: column;
    gap: 10px;
    transition: opacity 0.3s ease-in-out;
}

.yummy-control-panel>*:not(#yummy-collapse-toggle) {
    transition: transform 0.3s ease-out, opacity 0.3s ease-out;
    transform: translateX(0);
}

.yummy-control-panel.collapsed>*:not(#yummy-collapse-toggle) {
    opacity: 0;
    transform: translateX(calc(100% + 30px));
    pointer-events: none;
}

.yummy-control-panel.dimmed {
    opacity: 0.3;
    pointer-events: none;
}

.yummy-control-button {
    cursor: pointer;
    font-size: 24px;
    width: 48px;
    height: 48px;
    border-radius: 50%;
    transition: all 0.2s ease-in-out;
    background-color: #f0f0f0;
    border: 1px solid #ccc;
    display: flex;
    align-items: center;
    justify-content: center;
    position: relative; /* vNext: ä¸ºæç¤ºæ°”æ³¡æä¾›å®šä½ä¸Šä¸‹æ–‡ */
}

.yummy-control-button:hover {
    transform: scale(1.1);
    background-color: #e0e0e0;
}

.yummy-control-button.active {
    background-color: #4CAF50;
    color: white;
    border-color: #4CAF50;
    box-shadow: 0 0 10px #4CAF50;
}

/* vNext: é‡æ„è‡ªåŠ¨å‘é€æç¤ºæ°”æ³¡çš„æ ·å¼ */
#yummy-autosend-tooltip {
    position: absolute;
    /* vNext: å®šä½åœ¨æŒ‰é’®å·¦ä¾§ */
    right: 110%; 
    top: 50%;
    transform: translateY(-50%);
    
    width: 160px; /* vNext: å‡å°å®½åº¦ */
    background-color: #333;
    color: #fff;
    padding: 12px;
    border-radius: 8px;
    font-size: 13px;
    line-height: 1.5;
    box-shadow: 0 2px 10px rgba(0,0,0,0.2);
    cursor: pointer; /* vNext: æ•´ä¸ªæ°”æ³¡å¯ç‚¹å‡» */
    
    visibility: hidden;
    opacity: 0;
    transition: opacity 0.3s, transform 0.3s;
    
    /* vNext: åˆå§‹çŠ¶æ€ç¨å¾®å‘å³åç§»ï¼Œå®ç°å·¦ç§»è¿›å…¥æ•ˆæœ */
    transform: translate(5px, -50%);
}

#yummy-autosend-tooltip.visible {
    visibility: visible;
    opacity: 1;
    transform: translate(0, -50%);
}

/* vNext: æ°”æ³¡å³ä¾§çš„å°ç®­å¤´ */
#yummy-autosend-tooltip::after {
    content: '';
    position: absolute;
    top: 50%;
    left: 100%; /* vNext: ç®­å¤´åœ¨å³ä¾§ */
    margin-top: -5px;
    border-width: 5px;
    border-style: solid;
    border-color: transparent transparent transparent #333; /* vNext: ç®­å¤´æŒ‡å‘å³ */
}

/* vNext: ä¸ºâ€œä¸å†æç¤ºâ€çš„é“¾æ¥æ·»åŠ æ ·å¼ */
.yummy-tooltip-dismiss-link {
    text-decoration: underline;
    color: #ccc;
    cursor: pointer;
    font-size: 11px;
    margin-top: 8px;
    display: block;
    text-align: right;
}

.yummy-tooltip-dismiss-link:hover {
    color: #fff;
}


/* --- Selection Highlight & Popups --- */
/* 
  åˆ’è¯é«˜äº®æ ·å¼ (.yummy-selection-highlight)
  è¿™æ˜¯é€šè¿‡ JS å°†ç”¨æˆ·é€‰ä¸­çš„æ–‡æœ¬ç”¨ <span> åŒ…è£¹åï¼Œåº”ç”¨ç»™è¿™ä¸ª <span> çš„æ ·å¼ã€‚
  é»„åº•é»‘å­—æ˜¯æœ€ä¼ ç»Ÿã€æœ€é†’ç›®çš„é«˜äº®æ–¹æ¡ˆã€‚
*/
.yummy-selection-highlight {
    background-color: yellow !important;
    color: black !important;
    cursor: pointer;
}

#yummy-quick-highlight-button {
    position: fixed;
    z-index: 10000;
    cursor: pointer;
    width: 32px;
    height: 32px;
    border-radius: 50%;
    background-color: rgba(255, 255, 255, 0.95);
    border: 1px solid #ddd;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
    transition: transform 0.1s ease-in-out;
    display: none;
    align-items: center;
    justify-content: center;
    padding: 0;
    font-size: 18px;
}

#yummy-quick-highlight-button:hover {
    transform: scale(1.1);
}

body.yummy-selection-mode-active {
    cursor: text !important;
}

#yummy-cursor-follower {
    position: absolute;
    display: none;
    z-index: 10001;
    font-size: 16px;
    pointer-events: none;
    top: 0;
    left: 0;
}

/* vNext: Toast æç¤ºæ¡†çš„æ¨¡å—åŒ–é‡æ„ */

/* 1. é€šç”¨å¤–è§‚æ ·å¼ */
#yummy-copy-toast {
    position: fixed; /* æ”¹ä¸º fixed å®šä½ï¼Œä½¿å…¶ç›¸å¯¹äºè§†å£ï¼Œè€Œä¸æ˜¯ä»»ä½•çˆ¶å®¹å™¨ */
    display: flex;
    align-items: center;
    gap: 8px;
    background-color: rgba(40, 40, 40, 0.9);
    color: white;
    padding: 10px 16px;
    border-radius: 8px;
    font-size: 14px;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
    z-index: 10003;
    pointer-events: none;
    
    /* é»˜è®¤éšè— */
    visibility: hidden;
    opacity: 0;
    transition: opacity 0.3s ease-in-out, transform 0.3s ease-in-out, visibility 0.3s;
}

/* 2. "å±å¹•å±…ä¸­" æ¨¡å¼ (æ›¿æ¢æ—§çš„ "é¢æ¿å†…å›ºå®š" æ¨¡å¼) */
#yummy-copy-toast.yummy-toast-center-mode {
    top: 50px; /* ä»é¡¶éƒ¨ 50px çš„ä½ç½®å‡ºç° */
    left: 50%;
    transform: translate(-50%, -20px); /* åˆå§‹ä½ç½®åœ¨ä¸Šæ–¹ï¼Œä¸ºæ»‘å…¥åŠ¨ç”»åšå‡†å¤‡ */
}
#yummy-copy-toast.yummy-toast-center-mode.visible {
    visibility: visible;
    opacity: 1;
    transform: translate(-50%, 0); /* æ»‘å…¥åˆ°æœ€ç»ˆä½ç½® */
}

/* 3. "è·Ÿéšå…‰æ ‡" æ¨¡å¼ */
#yummy-copy-toast.yummy-toast-cursor-mode {
    position: fixed;
    transform: translate(15px, 15px); /* åˆå§‹ä½ç½®åœ¨å…‰æ ‡å³ä¸‹æ–¹ */
}
#yummy-copy-toast.yummy-toast-cursor-mode.visible {
    visibility: visible;
    opacity: 1;
    transform: translate(10px, 10px); /* å¾®è°ƒåŠ¨ç”»æ•ˆæœ */
}


/* é€šç”¨: Toast å†…çš„â€œæˆåŠŸâ€å¯¹å‹¾å›¾æ ‡ */
#yummy-copy-toast::before {
    content: 'âœ“';
    font-weight: bold;
    color: #4CAF50; /* ç»¿è‰² */
    font-size: 16px;
}

/* --- Collection Panel (Left Drawer) --- */
#yummy-collection-panel {
    position: fixed;
    top: 0;
    right: -350px;
    width: 350px;
    height: 100%;
    background-color: rgba(249, 250, 251, 0.98);
    border-left: 1px solid #e5e7eb;
    box-shadow: -4px 0 15px rgba(0, 0, 0, 0.1);
    z-index: 9999;
    transition: right 0.3s ease-in-out;
    display: flex;
    flex-direction: column;
}

#yummy-collection-panel.visible {
    right: 0;
}

#yummy-collection-header {
    padding: 12px 16px;
    font-weight: 600;
    color: #111827;
    border-bottom: 1px solid #e5e7eb;
    cursor: pointer;
    text-align: center;
    flex-shrink: 0;
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
}

#yummy-collection-header:hover {
    background-color: #f3f4f6;
}

#yummy-collection-pin-btn {
    position: absolute;
    left: 12px;
    top: 50%;
    transform: translateY(-50%);
    font-size: 18px;
    cursor: pointer;
    color: #6b7280;
    padding: 4px;
    border-radius: 4px;
    transition: all 0.2s;
}

#yummy-collection-pin-btn:hover {
    background-color: #e5e7eb;
    color: #111827;
}

#yummy-collection-pin-btn.pinned {
    color: #3b82f6;
    transform: translateY(-50%) rotate(-45deg);
}

#yummy-collection-clear-btn {
    position: absolute;
    right: 12px;
    top: 50%;
    transform: translateY(-50%);
    font-size: 18px;
    cursor: pointer;
    color: #6b7280;
    padding: 4px;
    border-radius: 4px;
    transition: all 0.2s;
}

#yummy-collection-clear-btn:hover {
    background-color: #e5e7eb;
    color: #111827;
}

#yummy-collection-content {
    overflow-y: auto;
    padding: 8px;
    flex-grow: 1;
    /* v0.5.15 ä¿®å¤: ç§»é™¤flexå¸ƒå±€ä»¥ç¡®ä¿ overflow ç”Ÿæ•ˆ */
}

/* v0.5.14 æ–°å¢ï¼šè‡ªå®šä¹‰ç¾åŒ–æ»šåŠ¨æ¡ */
#yummy-collection-content::-webkit-scrollbar {
    width: 6px;
}
#yummy-collection-content::-webkit-scrollbar-track {
    background: #f1f1f1;
    border-radius: 10px;
}
#yummy-collection-content::-webkit-scrollbar-thumb {
    background: #c7c7c7;
    border-radius: 10px;
}
#yummy-collection-content::-webkit-scrollbar-thumb:hover {
    background: #a8a8a8;
}


.yummy-collection-item {
    background-color: #ffffff;
    border: 1px solid #e0e0e0;
    border-radius: 8px;
    font-size: 14px;
    line-height: 1.6;
    word-wrap: break-word;
    white-space: pre-wrap;
    transition: background-color 0.2s, box-shadow 0.2s;
    display: flex;
    overflow: hidden;
    margin-bottom: 8px; /* v0.5.15: ç”¨ margin ä»£æ›¿ gap */
    position: relative; /* vNext: ä¸ºå¼¹çª—æä¾›å®šä½ä¸Šä¸‹æ–‡ */
}
.yummy-collection-item:last-child {
    margin-bottom: 0; /* ç§»é™¤æœ€åä¸€ä¸ªå…ƒç´ çš„ä¸‹è¾¹è· */
}

/* v0.5.14: å·¦ä¾§çŠ¶æ€æ¡/å¤é€‰æ¡†åŒºåŸŸ */
.yummy-item-status-bar {
    flex-shrink: 0;
    width: 28px;
    background-color: #f0f0f0;
    cursor: pointer;
    transition: background-color 0.2s ease;
    position: relative;
}
.yummy-item-status-bar:hover {
    background-color: #e0e0e0;
}

/* v0.5.14 & v0.5.15 & vNext: çŠ¶æ€æ¡å†…çš„å¯¹å‹¾å›¾æ ‡ (ç”¨CSSç»˜åˆ¶) */
.yummy-item-status-bar::before {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    width: 6px;
    height: 12px;
    border: solid black; /* vNext: å‹¾å‹¾æ”¹ä¸ºé»‘è‰² */
    border-width: 0 3px 3px 0;
    /* vNext: ä¿®æ­£å¯¹å‹¾çš„æ–¹å‘å’ŒåŠ¨ç”»ã€‚å…ˆç»Ÿä¸€å¹³ç§»è‡³ä¸­å¿ƒï¼Œå†è¿›è¡Œæ—‹è½¬ã€‚åŒæ—¶è°ƒæ•´å‚ç›´å¹³ç§»æ¯”ä¾‹(-60%)ä»¥ä¿®æ­£è§†è§‰ä¸­å¿ƒã€‚*/
    transform: translate(-50%, -60%) rotate(45deg) scale(0.8);
    opacity: 0;
    transition: opacity 0.2s ease, transform 0.2s ease;
}

/* vNext: æ–°å¢é¢œè‰²ç¼–ç ã€‚ä¸ºä¸åŒç±»å‹çš„æ¡ç›®å®šä¹‰ä¸åŒçš„çŠ¶æ€æ¡é¢œè‰²ã€‚ */
/* ç»¿è‰²é«˜äº®æ®µè½çš„æ ·å¼ */
.yummy-collection-item.type-liked.selected .yummy-item-status-bar {
    background-color: #c8e6c9; /* vNext: å†æ¬¡è°ƒæ•´çš„æŸ”å’Œç»¿è‰² */
}
.yummy-collection-item.type-liked.selected .yummy-item-status-bar:hover {
    background-color: #b9d9ba;
}

/* é»„è‰²é«˜äº®è¯­å¥çš„æ ·å¼ */
.yummy-collection-item.type-highlight.selected .yummy-item-status-bar {
    background-color: #fff59d; /* vNext: å†æ¬¡è°ƒæ•´çš„æŸ”å’Œé»„è‰² */
}
.yummy-collection-item.type-highlight.selected .yummy-item-status-bar:hover {
    background-color: #fff176;
}


/* v0.5.14: å½“æ¡ç›®è¢«é€‰ä¸­æ—¶ï¼Œæ˜¾ç¤ºå¯¹å‹¾ */
.yummy-collection-item.selected .yummy-item-status-bar::before {
    opacity: 1;
    /* vNext: ä¿®å¤BUGã€‚ç¡®ä¿é€‰ä¸­çŠ¶æ€ä¹Ÿä¿æŒæ—‹è½¬ï¼Œå¹¶ä¸”æ”¾å¤§åˆ°æ­£å¸¸å°ºå¯¸ï¼Œè€Œä¸æ˜¯å˜å› "L" å½¢ã€‚ */
    transform: translate(-50%, -60%) rotate(45deg) scale(1);
}

/* v0.5.14: å³ä¾§æ–‡æœ¬å†…å®¹åŒºåŸŸ */
.yummy-item-text-content {
    padding: 10px 12px;
    cursor: pointer;
    /* vNext: ä½¿ç”¨ max-height å’Œæ¸å˜è’™ç‰ˆæ¥æ›¿ä»£ line-clamp */
    max-height: 90px; /* çº¦ç­‰äº4è¡Œæ–‡å­—çš„é«˜åº¦ (14px * 1.6 * 4) */
    overflow: hidden;
    position: relative; /* ä¸º ::after ä¼ªå…ƒç´ æä¾›å®šä½ä¸Šä¸‹æ–‡ */
    transition: max-height 0.3s ease-in-out; /* ä¸ºå¯èƒ½çš„å±•å¼€åŠŸèƒ½é¢„ç•™è¿‡æ¸¡ */
}

/* vNext: ä¼˜é›…çš„æ¸å˜é®ç½©å±‚ */
.yummy-item-text-content::after {
    content: '';
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    height: 30px; /* æ¸å˜çš„é«˜åº¦ */
    background: transparent; /* vNext: é»˜è®¤é€æ˜ */
    transition: background 0.2s; /* æ·»åŠ è¿‡æ¸¡æ•ˆæœ */
    pointer-events: none; /* ç¡®ä¿ä¸å½±å“ä¸‹å±‚å…ƒç´ çš„é¼ æ ‡äº‹ä»¶ */
}

/* vNext: ä»…å½“ JS æ£€æµ‹åˆ°æ–‡æœ¬æº¢å‡ºæ—¶ï¼Œæ‰åº”ç”¨æ¸å˜æ•ˆæœ */
.yummy-item-text-content.is-overflowing::after {
    background: linear-gradient(to bottom, transparent, white);
}

.yummy-collection-item.starred {
    box-shadow: 0 0 0 2px #ffc107; /* ç”¨box-shadowä»£æ›¿borderï¼Œé¿å…å½±å“å¸ƒå±€ */
}

/* vNext: ä¸ºè¢«æˆªæ–­çš„æ¡ç›®æ·»åŠ æ‚¬æµ®é¢„è§ˆå¼¹çª—çš„æ ·å¼ */
#yummy-preview-tooltip {
    visibility: hidden; /* é»˜è®¤éšè— */
    width: 300px; /* å¼¹çª—å®½åº¦ */
    background-color: rgba(30, 30, 30, 0.95); /* åŠé€æ˜æ·±è‰²èƒŒæ™¯ */
    color: #fff;
    text-align: left;
    border-radius: 8px;
    padding: 12px;
    position: fixed; /* ä½¿ç”¨ fixed å®šä½ï¼Œé¿å…è¢«çˆ¶å®¹å™¨è£å‰ª */
    z-index: 10001; /* ç¡®ä¿åœ¨æœ€é¡¶å±‚ */
    opacity: 0;
    transition: opacity 0.2s, visibility 0.2s;
    pointer-events: none; /* ç¡®ä¿å¼¹çª—æœ¬èº«ä¸æ•è·é¼ æ ‡äº‹ä»¶ */
    white-space: pre-wrap; /* ä¿æŒæ–‡æœ¬æ¢è¡Œ */
    font-size: 13px; /* å­—ä½“å¯ä»¥ç¨å°ä¸€äº› */
    line-height: 1.5;
    box-shadow: 0 5px 15px rgba(0,0,0,0.3);
}

.yummy-collection-item:hover {
    background-color: #f9fafb;
}

/* v0.5.14: é‡å‘½åå¤åˆ¶æ—¶çš„é—ªçƒæ•ˆæœç±» */
@keyframes yummy-flash-animation {
    from { background-color: #d1fae5; }
    to { background-color: #ffffff; }
}
.yummy-collection-item.copied-flash {
    animation: yummy-flash-animation 0.7s ease;
}


/* v0.5.15: å…¨æ–°çš„æ”¶é›†é¢æ¿è„šéƒ¨æ ·å¼ */
#yummy-collection-footer {
    display: flex;
    gap: 8px;
    padding: 8px;
    border-top: 1px solid #e0e0e0;
    background-color: #f5f5f5;
}

/* vNext: åˆ é™¤æ—§çš„å…¨é€‰åŒºåŸŸæ ·å¼ */
/*
#yummy-footer-select-all-area {
    flex-shrink: 0;
    width: 36px;
    height: 36px;
    background-color: #e0e0e0;
    cursor: pointer;
    transition: background-color 0.2s ease;
    position: relative;
    border-radius: 6px;
    border: 1px solid #ccc;
}
*/

/* vNext: ä¸ºæ–°çš„è„šéƒ¨æ§åˆ¶åŒºåŸŸï¼ˆç»¿è‰²å’Œé»„è‰²ï¼‰å®šä¹‰é€šç”¨æ ·å¼ */
.yummy-footer-control-area {
    flex-shrink: 0;
    width: 36px;
    height: 36px;
    background-color: #e0e0e0;
    cursor: pointer;
    transition: background-color 0.2s ease;
    position: relative;
    border-radius: 6px;
    border: 1px solid #ccc;
}
.yummy-footer-control-area:hover {
    background-color: #d0d0d0;
}

/* é€šç”¨çš„â€œå¯¹å‹¾â€å’Œâ€œæ¨ªçº¿â€å›¾æ ‡æ ·å¼ */
.yummy-footer-control-area::before,
.yummy-footer-control-area::after {
    content: '';
    position: absolute;
    left: 50%;
    top: 50%;
    transform: translate(-50%, -50%);
    transition: opacity 0.2s ease;
}

/* å¯¹å‹¾ */
.yummy-footer-control-area::before {
    width: 7px;
    height: 14px;
    border: solid black; /* vNext: å‹¾å‹¾æ”¹ä¸ºé»‘è‰² */
    border-width: 0 3px 3px 0;
    transform: translate(-50%, -60%) rotate(45deg);
    opacity: 0;
}

/* æ¨ªçº¿ (ç”¨äºä¸­é—´æ€) */
.yummy-footer-control-area.indeterminate::after {
    width: 16px;
    height: 3px;
    background-color: black; /* vNext: æ¨ªçº¿æ”¹ä¸ºé»‘è‰² */
    border-radius: 1px;
    opacity: 1;
}

/* å½“æ§ä»¶è¢«é€‰ä¸­æ—¶ï¼Œæ˜¾ç¤ºå¯¹å‹¾ï¼Œéšè—æ¨ªçº¿ */
.yummy-footer-control-area.checked::before {
    opacity: 1;
}
.yummy-footer-control-area.checked.indeterminate::after {
    opacity: 0;
}


/* ä¸ºç»¿è‰²å’Œé»„è‰²çš„æ§åˆ¶å™¨å®šä¹‰ç‹¬ç‰¹çš„æ¿€æ´»é¢œè‰² */
#yummy-footer-select-liked-area.checked,
#yummy-footer-select-liked-area.indeterminate {
    background-color: #c8e6c9; /* vNext: æ›´æ–°ä¸ºæŸ”å’Œç»¿è‰² */
    border-color: #b9d9ba;
}
#yummy-footer-select-liked-area.checked:hover,
#yummy-footer-select-liked-area.indeterminate:hover {
    background-color: #b9d9ba;
}

#yummy-footer-select-highlight-area.checked,
#yummy-footer-select-highlight-area.indeterminate {
    background-color: #fff59d; /* vNext: æ›´æ–°ä¸ºæŸ”å’Œé»„è‰² */
    border-color: #fff176;
}
#yummy-footer-select-highlight-area.checked:hover,
#yummy-footer-select-highlight-area.indeterminate:hover {
    background-color: #fff176;
}


#yummy-collection-copy-selected-btn {
    flex-grow: 1; /* å æ»¡å‰©ä½™ç©ºé—´ */
    padding: 6px 12px;
    font-size: 14px;
    /* vNext: å­—ä½“åŠ ç²—ï¼Œå¹¶æ›´æ–°ä¸ºè“è‰²ç³» */
    font-weight: bold;
    border-radius: 6px;
    border: none;
    background-color: #e7f3fe; /* æ·¡è“è‰²èƒŒæ™¯ */
    color: #1c64f2; /* ä¸»é¢˜è“è‰²æ–‡æœ¬ */
    cursor: pointer;
    transition: background-color 0.2s, color 0.2s;
    text-align: center;
}

#yummy-collection-copy-selected-btn:hover {
    background-color: #dbeafe; /* æ‚¬åœæ—¶é¢œè‰²åŠ æ·± */
    color: #1a56d1;
}

/* --- Instruction Menu --- */
#yummy-instruction-menu {
    position: fixed;
    z-index: 10002;
    width: 230px;
    background-color: rgba(249, 250, 251, 0.98);
    border: 1px solid #e5e7eb;
    border-radius: 12px;
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15);
    visibility: hidden;
    opacity: 0;
    transform: scale(0.95) translateY(10px);
    transition: opacity 0.2s ease-out, transform 0.2s ease-out, visibility 0s 0.2s;
    display: flex;
    flex-direction: column;
}

#yummy-instruction-menu.visible {
    visibility: visible;
    opacity: 1;
    transform: scale(1) translateY(0);
    transition: opacity 0.2s ease-out, transform 0.2s ease-out, visibility 0s 0s;
}

.yummy-instruction-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 8px 12px;
    border-bottom: 1px solid #e5e7eb;
    flex-shrink: 0;
}

.yummy-instruction-header h3 {
    margin: 0;
    font-size: 14px;
    font-weight: 600;
    color: #111827;
    display: flex;
    justify-content: space-between;
    align-items: baseline;
    width: 100%;
}

.yummy-instruction-close-btn {
    cursor: pointer;
    font-size: 20px;
    color: #6b7280;
    line-height: 1;
    padding: 2px;
    border-radius: 4px;
}

.yummy-instruction-close-btn:hover {
    color: #111827;
    background-color: #f3f4f6;
}

.yummy-instruction-list {
    list-style: none;
    padding: 8px;
    margin: 0;
    flex-grow: 1;
    overflow-y: auto;
}

.yummy-hint-text {
    color: #9ca3af;
    font-size: 12px;
    font-weight: 400;
}

.yummy-instruction-item {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 10px;
    padding: 8px 10px;
    border-radius: 6px;
    cursor: pointer;
    font-size: 14px;
    transition: background-color 0.15s ease-in-out, color 0.15s ease-in-out;
    white-space: nowrap;
}

.yummy-instruction-item .emoji {
    font-size: 16px;
}

.yummy-instruction-item.selected {
    background-color: #e7f3fe;
    color: #1c64f2;
    font-weight: 500;
}

.yummy-instruction-item.yummy-separator {
    height: 1px;
    background-color: #e5e7eb;
    margin: 6px 0;
    padding: 0;
    cursor: default;
}

/* --- Global Alert Box --- */
.yummy-global-alert-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.4);
    z-index: 10005;
    display: flex;
    align-items: center;
    justify-content: center;
    opacity: 0;
    visibility: hidden;
    transition: opacity 0.2s ease, visibility 0s 0.2s;
}

.yummy-global-alert-overlay.visible {
    opacity: 1;
    visibility: visible;
    transition: opacity 0.2s ease, visibility 0s 0s;
}

.yummy-global-alert-box {
    background-color: white;
    padding: 24px;
    border-radius: 12px;
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
    width: 90%;
    max-width: 400px;
    transform: scale(0.95);
    transition: transform 0.2s ease;
}

.yummy-global-alert-overlay.visible .yummy-global-alert-box {
    transform: scale(1);
}

.yummy-global-alert-title {
    font-size: 18px;
    font-weight: 600;
    color: #111827;
    margin: 0 0 12px 0;
}

.yummy-global-alert-message {
    font-size: 15px;
    line-height: 1.6;
    color: #374151;
    margin: 0;
    white-space: pre-wrap; /* To respect \n */
}

.yummy-global-alert-details {
    font-size: 13px;
    color: #6b7280;
    margin: 12px 0 0 0;
    white-space: pre-wrap; /* To respect \n */
}

.yummy-global-alert-footer {
    margin-top: 24px;
    text-align: right;
}

.yummy-global-alert-button {
    background-color: #3b82f6;
    color: white;
    border: none;
    padding: 10px 20px;
    border-radius: 8px;
    cursor: pointer;
    font-size: 15px;
    font-weight: 500;
    transition: background-color 0.2s;
}

.yummy-global-alert-button:hover {
    background-color: #2563eb;
}

.yummy-global-alert-button.yummy-alert-btn-secondary {
    background-color: #e5e7eb;
    color: #374151;
}
.yummy-global-alert-button.yummy-alert-btn-secondary:hover {
    background-color: #d1d5db;
}

.yummy-global-alert-button.yummy-alert-btn-danger {
    background-color: #ef4444;
    color: white;
}
.yummy-global-alert-button.yummy-alert-btn-danger:hover {
    background-color: #dc2626;
}


/* --- Easter Eggs --- */

/* Sugar Rush: Container for candies */
.yummy-sugar-rush-container {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    z-index: 10010;
    overflow: hidden;
}

/* Sugar Rush: Individual candy emoji */
.yummy-candy-emoji {
    position: absolute;
    bottom: -50px; /* Start from below the screen */
    font-size: 24px;
    animation-name: yummy-sugar-float;
    animation-timing-function: linear;
    animation-iteration-count: 1;
    will-change: transform, opacity;
}

@keyframes yummy-sugar-float {
    from {
        transform: translateY(0) translateX(0) rotate(0deg);
        opacity: 1;
    }
    to {
        transform: translateY(-110vh) translateX(var(--x-drift, 0)) rotate(720deg);
        opacity: 0;
    }
}

/* Empty Copy Lyric: Temporary item */
.yummy-collection-item-temp-egg {
    background-color: #fefce8; /* A very light yellow */
    border-color: #facc15;
    transition: all 0.5s ease-in-out;
    max-height: 100px; /* Initial max-height for transition */
}