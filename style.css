/*
  Yummy! æ ·å¼è¡¨ (v0.4.4)

  æœ¬æ ·å¼è¡¨å®šä¹‰äº† Yummy! æ‰©å±•æ³¨å…¥åˆ° ChatGPT é¡µé¢çš„æ‰€æœ‰UIå…ƒç´ çš„è§†è§‰è¡¨ç°ã€‚
  å…¶æ ¸å¿ƒè®¾è®¡å“²å­¦æ˜¯ï¼š
  1.  **æœ€å°ä¾µå…¥**ï¼šå°½å¯èƒ½ä¸ç ´å ChatGPT çš„åŸå§‹å¸ƒå±€å’Œæ ·å¼ã€‚
  2.  **è§†è§‰åé¦ˆ**ï¼šé€šè¿‡é¢œè‰²ã€è¿‡æ¸¡åŠ¨ç”»å’Œæ‚¬åœæ•ˆæœï¼Œä¸ºç”¨æˆ·çš„æ¯ä¸€ä¸ªæ“ä½œæä¾›æ¸…æ™°ã€å³æ—¶çš„åé¦ˆã€‚
  3.  **å“åº”å¼äº¤äº’**ï¼šUI å…ƒç´ ï¼ˆå¦‚è¯„ä»·æ ï¼‰åº”åœ¨éœ€è¦æ—¶å‡ºç°ï¼Œåœ¨ä¸éœ€è¦æ—¶éšè—ï¼Œä¿æŒç•Œé¢æ•´æ´ã€‚
*/

/* 
  æ®µè½å®¹å™¨ (.yummy-paragraph-container)
  è¿™æ˜¯ç”± content.js åŠ¨æ€åˆ›å»ºçš„ã€ç”¨äºåŒ…è£¹æ¯ä¸€ä¸ªå¯è¯„ä»·å†…å®¹å—ï¼ˆå¦‚ <p>, <h1>, <li> ç­‰ï¼‰çš„ <div> å®¹å™¨ã€‚
  å®ƒçš„ä¸»è¦ä½œç”¨æœ‰ä¸¤ä¸ªï¼š
  1.  **æä¾›æ‚¬åœç›®æ ‡**ï¼šä¸‹é¢çš„ `:hover` è§„åˆ™åˆ©ç”¨è¿™ä¸ªå®¹å™¨æ¥è§¦å‘å…¶å†…éƒ¨è¯„ä»·æ çš„æ˜¾ç¤ºã€‚
  2.  **æä¾›å®šä½ä¸Šä¸‹æ–‡**ï¼šè™½ç„¶åœ¨ v0.4.4 ç‰ˆæœ¬ä¸­å…¶ position æ˜¯ staticï¼Œå¯¼è‡´è¯„ä»·æ å®é™…ä¸Šæ˜¯ç›¸å¯¹äºæ›´å¤§çš„çˆ¶å®¹å™¨å®šä½ï¼Œ
      ä½†åœ¨é€»è¾‘ä¸Šï¼Œå®ƒæœ¬åº”æ˜¯è¯„ä»·æ çš„ç›´æ¥å®šä½é”šç‚¹ã€‚è¿™æ˜¯åç»­ç‰ˆæœ¬å¯èƒ½éœ€è¦ä¼˜åŒ–çš„ç‚¹ã€‚
*/
.yummy-paragraph-container {
    position: static;
}

/*
  è¯„ä»·æ  (.yummy-rating-bar)
  è¿™æ˜¯åŒ…å«"å–œæ¬¢"å’Œ"ä¸å–œæ¬¢"æŒ‰é’®çš„æ ¸å¿ƒUIã€‚
*/
.yummy-rating-bar {
    /* 
      å…³é”®å®šä½ï¼šé€šè¿‡ç»å¯¹å®šä½ï¼Œå°†è¯„ä»·æ ä»æ­£å¸¸çš„æ–‡æ¡£æµä¸­è„±ç¦»ï¼Œä½¿å…¶å¯ä»¥"æ‚¬æµ®"åœ¨é¡µé¢ä¸Šã€‚
      å®ƒä¼šç›¸å¯¹äºæœ€è¿‘çš„ã€é static å®šä½çš„ç¥–å…ˆå…ƒç´ è¿›è¡Œå®šä½ã€‚
    */
    position: absolute;
    /* 
      æ°´å¹³å®šä½ï¼š-85px æ˜¯ä¸€ä¸ªç²¾å¿ƒé€‰æ‹©çš„"é­”æœ¯æ•°å­—"ï¼Œç›®çš„æ˜¯è®©è¯„ä»·æ æ­£å¥½å‡ºç°åœ¨
      ChatGPT å¯¹è¯æ°”æ³¡å·¦ä¾§çš„ç©ºç™½åŒºåŸŸï¼Œæ—¢ä¸é®æŒ¡æ–‡æœ¬ï¼Œåˆæ–¹ä¾¿é¼ æ ‡è§¦åŠã€‚
    */
    left: -85px;
    width: 80px;

    /* ä½¿ç”¨ Flexbox å¸ƒå±€ï¼Œç¡®ä¿å†…éƒ¨çš„ä¸¤ä¸ªæŒ‰é’®èƒ½æ°´å¹³ã€å±…ä¸­æ’åˆ— */
    display: flex;
    flex-direction: row;
    justify-content: center;
    align-items: center;
    gap: 4px;

    /* 
      é»˜è®¤éšè—ä¸å¹³æ»‘è¿‡æ¸¡ï¼š
      é»˜è®¤çŠ¶æ€ä¸‹è¯„ä»·æ å®Œå…¨é€æ˜ï¼ˆä¸å¯è§ï¼‰ã€‚å½“å…¶é€æ˜åº¦å˜åŒ–æ—¶ï¼ˆè§ä¸‹é¢çš„:hoverè§„åˆ™ï¼‰ï¼Œ
      è¿™ä¸ªè¿‡ç¨‹ä¼šåœ¨ 0.2 ç§’å†…å¹³æ»‘å®Œæˆï¼Œè€Œä¸æ˜¯ç”Ÿç¡¬åœ°é—ªç°/æ¶ˆå¤±ã€‚
    */
    opacity: 0;
    transition: opacity 0.2s ease-in-out;
    padding: 2px 0;
}

/*
  æ ¸å¿ƒäº¤äº’é€»è¾‘ï¼šå½“é¼ æ ‡æ‚¬åœåœ¨æ®µè½å®¹å™¨ä¸Šæ—¶ï¼Œå…¶å†…éƒ¨çš„è¯„ä»·æ å˜ä¸ºä¸é€æ˜ï¼ˆå¯è§ï¼‰ã€‚
*/
.yummy-paragraph-container:hover .yummy-rating-bar {
    opacity: 1;
}

/*
  è¯„ä»·æŒ‰é’® (.yummy-rating-button)
  å®šä¹‰äº† ğŸ˜‹ å’Œ ğŸ¤® è¿™ä¸¤ä¸ªæŒ‰é’®çš„é€šç”¨æ ·å¼ã€‚
*/
.yummy-rating-button {
    cursor: pointer;
    font-size: 16px;
    padding: 2px;
    border-radius: 4px;
    /* è½»å¾®çš„æ”¾å¤§åŠ¨ç”»ï¼Œæä¾›åŠ¨æ€åé¦ˆ */
    transition: transform 0.1s ease-in-out;
    line-height: 1;
    /* 
      ç¦æ­¢é€‰ä¸­æ–‡æœ¬ï¼šé˜²æ­¢ç”¨æˆ·åœ¨ç‚¹å‡»æ—¶æ„å¤–é€‰ä¸­ Emoji å­—ç¬¦ï¼Œ
      ç¡®ä¿å…¶äº¤äº’è¡Œä¸ºæ›´åƒä¸€ä¸ªçœŸæ­£çš„"æŒ‰é’®"ã€‚
    */
    -webkit-user-select: none;
    /* Safari */
    -ms-user-select: none;
    /* IE 10+ and Edge */
    user-select: none;
    /* Standard syntax */
}

.yummy-rating-button:hover {
    transform: scale(1.2);
}

/*
  é—ªçƒåŠ¨ç”» (@keyframes yummy-flash-background)
  è¿™æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„åŠ¨ç”»æ•ˆæœï¼Œç”¨äºåœ¨éœ€è¦æ—¶ï¼ˆå¦‚å¯¹æ ‡é¢˜è¿›è¡Œåˆæ¬¡è¯„çº§ï¼‰ç»™äºˆç”¨æˆ·éä¾µå…¥å¼çš„è§†è§‰æç¤ºã€‚
  åŠ¨ç”»è¿‡ç¨‹ä¸ºï¼šèƒŒæ™¯ä»é€æ˜ -> åŠé€æ˜ç°è‰² -> é€æ˜ã€‚
*/
@keyframes yummy-flash-background {
    0%,
    100% {
        background-color: transparent;
    }

    50% {
        background-color: rgba(229, 231, 235, 0.7);
        /* A light gray, semi-transparent */
    }
}

/*
  é—ªçƒæ•ˆæœåº”ç”¨ç±» (.yummy-flash)
  ä»»ä½•è¢« JS åŠ¨æ€æ·»åŠ äº†è¿™ä¸ªç±»çš„å…ƒç´ ï¼Œéƒ½ä¼šæ’­æ”¾ä¸Šé¢çš„é—ªçƒåŠ¨ç”»ã€‚
*/
.yummy-flash {
    animation: yummy-flash-background 0.5s ease-in-out;
}

/*
  è¯„ä»·çŠ¶æ€é«˜äº® (.yummy-liked, .yummy-disliked)
  è¿™æ˜¯ç”¨æˆ·è¯„ä»·åæœ€ä¸»è¦çš„è§†è§‰åé¦ˆã€‚
*/
.yummy-liked {
    /* 
      ä½¿ç”¨å¸¦é€æ˜åº¦çš„ RGBA é¢œè‰²ï¼Œè€Œä¸æ˜¯ä¸é€æ˜çš„ HEX é¢œè‰²ï¼Œ
      å¯ä»¥è®©é«˜äº®æ•ˆæœæ›´æŸ”å’Œï¼Œéšçº¦é€å‡ºåº•å±‚çš„é¡µé¢ç»“æ„ã€‚
      !important ç”¨äºç¡®ä¿æˆ‘ä»¬çš„æ ·å¼èƒ½è¦†ç›– ChatGPT çš„é»˜è®¤æ ·å¼ã€‚
    */
    background-color: rgba(221, 247, 221, 0.8) !important;
}

.yummy-disliked {
    background-color: rgba(255, 221, 221, 0.8) !important;
}

/*
  åµŒå¥—åˆ—è¡¨å¤„ç†ï¼šè¿™æ˜¯ä¸€ä¸ªé’ˆå¯¹ç‰¹æ®Šåœºæ™¯çš„é˜²å¾¡æ€§è§„åˆ™ã€‚
  å½“ä¸€ä¸ªå·²ç»è¢«é«˜äº®çš„å…ƒç´ ï¼ˆå¦‚ <li>ï¼‰å†…éƒ¨åˆåŒ…å«ä¸€ä¸ªåˆ—è¡¨ï¼ˆ<ul> æˆ– <ol>ï¼‰æ—¶ï¼Œ
  ä¸ºäº†é¿å…é«˜äº®èƒŒæ™¯è‰²åœ¨å­åˆ—è¡¨ä¸Šé‡å¤å åŠ å¯¼è‡´é¢œè‰²è¿‡æ·±ï¼Œ
  è¿™æ¡è§„åˆ™ä¼šå¼ºåˆ¶å°†å­åˆ—è¡¨çš„èƒŒæ™¯è®¾å›ç™½è‰²ï¼Œä¿è¯å¯è¯»æ€§ã€‚
*/
.yummy-liked>ul,
.yummy-liked>ol,
.yummy-disliked>ul,
.yummy-disliked>ol {
    background-color: #FFFFFF !important;
}

/* --- Control Panel --- */
/* 
  å³ä¾§æ§åˆ¶é¢æ¿ (.yummy-control-panel)
  è¿™æ˜¯ä¸€ä¸ªå›ºå®šåœ¨å±å¹•å³ä¾§çš„æ‚¬æµ®é¢æ¿ï¼Œä½œä¸ºæ‰€æœ‰å…¨å±€æ“ä½œæŒ‰é’®çš„å®¹å™¨ã€‚
  å®ƒçš„æ˜¾éšå’ŒæŠ˜å éƒ½ä¾èµ–äº class çš„åˆ‡æ¢å’Œ CSS transition åŠ¨ç”»ã€‚
*/
.yummy-control-panel {
    position: fixed;
    top: 50%;
    right: 20px;
    transform: translateY(-50%);
    padding: 0;
    z-index: 9998;
    display: flex;
    flex-direction: column;
    gap: 10px;
    transition: opacity 0.3s ease-in-out;
}

.yummy-control-panel>*:not(#yummy-collapse-toggle) {
    transition: transform 0.3s ease-out, opacity 0.3s ease-out;
    transform: translateX(0);
}

.yummy-control-panel.collapsed>*:not(#yummy-collapse-toggle) {
    opacity: 0;
    transform: translateX(calc(100% + 30px));
    pointer-events: none;
}

.yummy-control-panel.dimmed {
    opacity: 0.3;
    pointer-events: none;
}

.yummy-control-button {
    cursor: pointer;
    font-size: 24px;
    width: 48px;
    height: 48px;
    border-radius: 50%;
    transition: all 0.2s ease-in-out;
    background-color: #f0f0f0;
    border: 1px solid #ccc;
    display: flex;
    align-items: center;
    justify-content: center;
}

.yummy-control-button:hover {
    transform: scale(1.1);
    background-color: #e0e0e0;
}

.yummy-control-button.active {
    background-color: #4CAF50;
    color: white;
    border-color: #4CAF50;
    box-shadow: 0 0 10px #4CAF50;
}

/* --- Selection Highlight & Popups --- */
/* 
  åˆ’è¯é«˜äº®æ ·å¼ (.yummy-selection-highlight)
  è¿™æ˜¯é€šè¿‡ JS å°†ç”¨æˆ·é€‰ä¸­çš„æ–‡æœ¬ç”¨ <span> åŒ…è£¹åï¼Œåº”ç”¨ç»™è¿™ä¸ª <span> çš„æ ·å¼ã€‚
  é»„åº•é»‘å­—æ˜¯æœ€ä¼ ç»Ÿã€æœ€é†’ç›®çš„é«˜äº®æ–¹æ¡ˆã€‚
*/
.yummy-selection-highlight {
    background-color: yellow !important;
    color: black !important;
    cursor: pointer;
}

#yummy-quick-highlight-button {
    position: fixed;
    z-index: 10000;
    cursor: pointer;
    width: 32px;
    height: 32px;
    border-radius: 50%;
    background-color: rgba(255, 255, 255, 0.95);
    border: 1px solid #ddd;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
    transition: transform 0.1s ease-in-out;
    display: none;
    align-items: center;
    justify-content: center;
    padding: 0;
    font-size: 18px;
}

#yummy-quick-highlight-button:hover {
    transform: scale(1.1);
}

body.yummy-selection-mode-active {
    cursor: text !important;
}

#yummy-cursor-follower {
    position: absolute;
    display: none;
    z-index: 10001;
    font-size: 16px;
    pointer-events: none;
    top: 0;
    left: 0;
}

#yummy-copy-toast {
    position: fixed;
    display: none;
    z-index: 10002;
    padding: 8px 12px;
    background-color: rgba(17, 24, 39, 0.85);
    color: white;
    border-radius: 6px;
    font-size: 14px;
    pointer-events: none;
}

/* --- Collection Panel (Left Drawer) --- */
#yummy-collection-panel {
    position: fixed;
    top: 0;
    right: -350px;
    width: 350px;
    height: 100%;
    background-color: rgba(249, 250, 251, 0.98);
    border-left: 1px solid #e5e7eb;
    box-shadow: -4px 0 15px rgba(0, 0, 0, 0.1);
    z-index: 9999;
    transition: right 0.3s ease-in-out;
    display: flex;
    flex-direction: column;
}

#yummy-collection-panel.visible {
    right: 0;
}

#yummy-collection-header {
    padding: 12px 16px;
    font-weight: 600;
    color: #111827;
    border-bottom: 1px solid #e5e7eb;
    cursor: pointer;
    text-align: center;
    flex-shrink: 0;
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
}

#yummy-collection-header:hover {
    background-color: #f3f4f6;
}

#yummy-collection-pin-btn {
    position: absolute;
    left: 12px;
    top: 50%;
    transform: translateY(-50%);
    font-size: 18px;
    cursor: pointer;
    color: #6b7280;
    padding: 4px;
    border-radius: 4px;
    transition: all 0.2s;
}

#yummy-collection-pin-btn:hover {
    background-color: #e5e7eb;
    color: #111827;
}

#yummy-collection-pin-btn.pinned {
    color: #3b82f6;
    transform: translateY(-50%) rotate(-45deg);
}

#yummy-collection-clear-btn {
    position: absolute;
    right: 12px;
    top: 50%;
    transform: translateY(-50%);
    font-size: 18px;
    cursor: pointer;
    color: #6b7280;
    padding: 4px;
    border-radius: 4px;
    transition: all 0.2s;
}

#yummy-collection-clear-btn:hover {
    background-color: #e5e7eb;
    color: #111827;
}

#yummy-collection-content {
    flex-grow: 1;
    overflow-y: auto;
    padding: 8px;
    display: flex;
    flex-direction: column;
    gap: 8px;
}

.yummy-collection-item {
    position: relative;
    background-color: #ffffff;
    border: 1px solid #d1d5db;
    border-radius: 6px;
    padding: 10px;
    font-size: 14px;
    line-height: 1.5;
    cursor: pointer;
    transition: background-color 0.2s, border-left-color 0.2s;
    word-wrap: break-word;
    white-space: pre-wrap;
    border-left: 3px solid #d1d5db;
}

.yummy-collection-item.starred {
    background-color: #f0f8ff;
    border-left: 3px solid #3b82f6;
}

.yummy-collection-item:hover {
    background-color: #eff6ff;
}

.yummy-collection-item.copied {
    background-color: #d1fae5;
    transition: background-color 0.1s;
}

/* --- Context Menu --- */
.yummy-context-menu {
    position: fixed;
    z-index: 10005;
    background-color: #ffffff;
    border: 1px solid #e5e7eb;
    border-radius: 8px;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    padding: 6px;
    display: flex;
    flex-direction: column;
    min-width: 150px;
}

.yummy-context-menu-item {
    font-size: 14px;
    padding: 8px 12px;
    cursor: pointer;
    border-radius: 4px;
    display: flex;
    align-items: center;
    gap: 8px;
    color: #374151;
}

.yummy-context-menu-item:hover {
    background-color: #f3f4f6;
}

.yummy-context-menu-item.danger:hover {
    background-color: #fee2e2;
    color: #ef4444;
}